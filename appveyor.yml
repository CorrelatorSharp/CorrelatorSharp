environment:
  package_version: '1.4.0-beta1'
  assembly_version: '1.1.0.0'

version: '$(package_version)+{build}'

image: Visual Studio 2017

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '$(package_version)'
  assembly_version: '$(assembly_version)'

configuration: Release

before_build: dotnet restore

build:
  publish_nuget: true
  publish_nuget_symbols: true
  verbosity: minimal  

test_script: dotnet test -c %CONFIGURATION% CorrelatorSharp.Tests

deploy:
- provider: NuGet
  api_key:
    secure: vZC+uEZj00A+9riSWLXqdnPtGa96W9SQkBy30dS2D5bOUdvteU9vOAP69QLJrY/o
  on:
    appveyor_repo_tag: true
